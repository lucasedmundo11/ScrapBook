tags:
  - User Management
summary: Update user password
description: Atualizar senha do usuário (apenas admins ou o próprio usuário)
consumes:
  - application/json
produces:
  - application/json
security:
  - Bearer: []
parameters:
  - name: user_id
    in: path
    type: integer
    required: true
    description: User ID to update password
    example: 2
  - name: password_data
    in: body
    required: true
    description: Password update data
    schema:
      type: object
      properties:
        current_password:
          type: string
          description: Current password (required for non-admin users)
          example: "oldpassword123"
        new_password:
          type: string
          description: New password (minimum 6 characters)
          example: "newpassword456"
      required:
        - new_password
responses:
  200:
    description: Password updated successfully
    schema:
      type: object
      properties:
        success:
          type: boolean
          example: true
        data:
          type: object
          properties:
            message:
              type: string
              example: "Password updated successfully"
        message:
          type: string
          example: "Password updated successfully"
        timestamp:
          type: string
          example: "2025-08-10T10:30:00Z"
  400:
    description: Bad request - Missing or invalid data
    schema:
      type: object
      properties:
        success:
          type: boolean
          example: false
        error:
          type: object
          properties:
            code:
              type: string
              example: "MISSING_REQUEST_BODY"
            message:
              type: string
              example: "Request body is required"
  401:
    description: Unauthorized - Authentication required or invalid current password
    schema:
      type: object
      properties:
        success:
          type: boolean
          example: false
        error:
          type: object
          properties:
            code:
              type: string
              example: "INVALID_CURRENT_PASSWORD"
            message:
              type: string
              example: "Current password is incorrect"
  403:
    description: Forbidden - Insufficient permissions
    schema:
      type: object
      properties:
        success:
          type: boolean
          example: false
        error:
          type: object
          properties:
            code:
              type: string
              example: "INSUFFICIENT_PERMISSIONS"
            message:
              type: string
              example: "You can only update your own password or need admin privileges"
  404:
    description: User not found
    schema:
      type: object
      properties:
        success:
          type: boolean
          example: false
        error:
          type: object
          properties:
            code:
              type: string
              example: "USER_NOT_FOUND"
            message:
              type: string
              example: "User not found"
  422:
    description: Unprocessable entity - Password validation failed
    schema:
      type: object
      properties:
        success:
          type: boolean
          example: false
        error:
          type: object
          properties:
            code:
              type: string
              example: "PASSWORD_TOO_SHORT"
            message:
              type: string
              example: "Password must be at least 6 characters long"
  500:
    description: Internal server error
    schema:
      type: object
      properties:
        success:
          type: boolean
          example: false
        error:
          type: object
          properties:
            code:
              type: string
              example: "UPDATE_PASSWORD_ERROR"
            message:
              type: string
              example: "Failed to update password"
